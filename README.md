# Тестовое задание Python developer от RLT

## Описание задачи:
В рамках тестового задания написан алгоритма агрегации статистических данных о зарплатах сотрудников компании по временным промежуткам. И создан телеграмм бот, который принимает от пользователей текстовые сообщением содержащие JSON с входными данными и отдавает агрегированные данные в ответ.

Алгоритм принимает на вход:
* Дату и время старта агрегации в ISO формате (dt_from)
* Дату и время окончания агрегации в ISO формате (dt_upto)
* Тип агрегации (group_type). Типы агрегации могут быть следующие: hour, day, month.

Пример входных данных:
{
  "dt_from":"2022-09-01T00:00:00",
  "dt_upto":"2022-12-31T23:59:00",
  "group_type":"month"
}

Комментарий к входным данным: агрегировать выплаты с 1 сентября 2022 года по 31 декабря 2022 года, тип агрегации по месяцу.

На выходе алгоритм формирует ответ содержащий:
* Агрегированный массив данных (dataset)
* Подписи к значениям агрегированного массива данных в ISO формате (labels)

Пример ответа:
{
  "dataset": [5906586, 5515874, 5889803, 6092634],
  "labels": ["2022-09-01T00:00:00", "2022-10-01T00:00:00", "2022-11-01T00:00:00", "2022-12-01T00:00:00"]
}

Комментарий к ответу: в нулевом элементе датасета содержится сумма всех выплат за сентябрь, в первом элементе сумма всех выплат за октябрь и т.д. В лейблах подписи соответственно элементам датасета.


[Агрегатор RLT (test_task)](https://t.me/agragate_testtask_rlt_bot) [@agragate_testtask_rlt_bot](https://t.me/agragate_testtask_rlt_bot)

### Автор Артём Куликов

tg: [@Berg1005](https://t.me/berg1005)

[GitHub](https://github.com/berg96)

## Используемые технологии 

Проект реализован на языке python c использованием следующих библиотек:

* aiogram (v 3.4.1)
* asyncio (v 3.4.3)
* python-dotenv (v 1.0.1)
* motor (v 3.4.0)


## Как запустить проект

Клонировать репозиторий:
```
git clone git@github.com:berg96/agregate_tg_bot_testtask_RLT.git
```
Собрать и запустить Docker compose:
```
docker compose build
docker compose up -d
```
Скопировать образ коллекции из репозитория в контейнер и восстановить коллекцию в БД:
```
docker compose cp data/ mongodb://data/db/dump/
docker compose exec mongodb mongorestore --db sampleDB data/db/dump/sample_collection.bson
```
